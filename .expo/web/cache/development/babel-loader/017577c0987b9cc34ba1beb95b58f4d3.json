{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\shash\\\\photofeed\\\\app\\\\screens\\\\profile.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { f, auth, database, storage } from \"../../config/config\";\nimport PhotoList from \"../components/photoList\";\nimport UserAuth from \"../components/auth.js\";\n\nvar profile = function (_React$Component) {\n  _inherits(profile, _React$Component);\n\n  var _super = _createSuper(profile);\n\n  function profile(props) {\n    var _this;\n\n    _classCallCheck(this, profile);\n\n    _this = _super.call(this, props);\n\n    _this.logoutUser = function () {\n      f.auth().signOut();\n      alert('Logged Out');\n    };\n\n    _this.editProfile = function () {\n      _this.setState({\n        editProfile: true\n      });\n    };\n\n    _this.saveProfile = function () {\n      var name = _this.state.name;\n      var username = _this.state.username;\n\n      if (name !== '') {\n        database.ref('users').child(_this.state.userId).child('name').set(name);\n      }\n\n      if (username !== '') {\n        database.ref('users').child(_this.state.userId).child('username').set(username);\n      }\n\n      _this.setState({\n        editProfile: false\n      });\n    };\n\n    _this.fetchUserInfo = function (userId) {\n      var that = _assertThisInitialized(_this);\n\n      database.ref('user').child(userId).once('value').then(function (snapshot) {\n        var exist = snapshot.val() !== null;\n        if (exist) data = snapshot.val();\n        that.setState({\n          username: true,\n          userId: userId\n        });\n      });\n    };\n\n    _this.componentDidMount = function () {\n      var that = _assertThisInitialized(_this);\n\n      f.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          that.fetchUserInfo(user.uid);\n        } else {\n          that.setState({\n            loggedin: false\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      loggedin: false\n    };\n    return _this;\n  }\n\n  _createClass(profile, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }\n      }, this.state.loggedin == true ? React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          height: 70,\n          paddingTop: 30,\n          backgroundColor: 'white',\n          borderColor: 0.5,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 26\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }\n      }, \"profile\")), React.createElement(View, {\n        style: {\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          flexDirection: 'row',\n          paddingVertical: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }\n      }, React.createElement(Image, {\n        source: {\n          url: this.state.avatar\n        },\n        style: {\n          marginLeft: 10,\n          width: 100,\n          height: 100,\n          borderRadius: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }\n      }), React.createElement(View, {\n        style: {\n          marginRight: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 33\n        }\n      }, this.state.name), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 33\n        }\n      }, this.state.username))), this.state.editProfile == true ? React.createElement(View, {\n        style: {\n          alignItems: 'center',\n          justifyContent: 'center',\n          paddingBottom: 20,\n          borderBottomWidth: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.setState({\n            editProfile: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeigh: 'blod'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 33\n        }\n      }, \"Cancel Editing\")), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 29\n        }\n      }, \"Name\"), React.createElement(TextInput, {\n        editable: true,\n        placeholder: 'Enter your name',\n        onChangeText: function onChangeText(text) {\n          return _this2.setState({\n            name: text\n          });\n        },\n        value: this.state.name,\n        style: {\n          width: 250,\n          marginVertical: 10,\n          padding: 5,\n          borderColor: 'grey',\n          borderWidth: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }\n      }), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }\n      }, \"UserName\"), React.createElement(TextInput, {\n        editable: true,\n        placeholder: 'Enter your UserName',\n        onChangeText: function onChangeText(text) {\n          return _this2.setState({\n            username: text\n          });\n        },\n        value: this.state.username,\n        style: {\n          width: 250,\n          marginVertical: 10,\n          padding: 5,\n          borderColor: 'grey',\n          borderWidth: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 29\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: {\n          padding: 10,\n          backgroundColor: 'blue'\n        },\n        onPress: function onPress() {\n          return _this2.saveProfile();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeigh: 'blod'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 33\n        }\n      }, \"Cancel Editing\")), React.createElement(Text, {\n        style: {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 29\n        }\n      }, \"Edit Save Changes\")) : React.createElement(View, {\n        style: {\n          padding: 20,\n          borderBottomWidth: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.logoutUser();\n        },\n        style: {\n          marginTop: 10,\n          marginHorizontal: 40,\n          paddingVertical: 15,\n          borderRadius: 20,\n          borderColor: 'grey',\n          borderWidth: 1.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: 'center',\n          color: 'grey'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 29\n        }\n      }, \"Logout\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.editProfile();\n        },\n        style: {\n          marginTop: 10,\n          marginHorizontal: 40,\n          paddingVertical: 15,\n          borderRadius: 20,\n          borderColor: 'grey',\n          borderWidth: 1.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: 'center',\n          color: 'grey'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 29\n        }\n      }, \"Edit Profile\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('Upload');\n        },\n        style: {\n          backgroundColor: 'grey',\n          marginTop: 10,\n          marginHorizontal: 40,\n          paddingVertical: 35,\n          borderRadius: 20,\n          borderColor: 'grey',\n          borderWidth: 1.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: 'center',\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 29\n        }\n      }, \"Upload New \"))), React.createElement(PhotoList, {\n        isuser: true,\n        userId: this.state.userId,\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }\n      })) : React.createElement(UserAuth, {\n        message: 'Please login to view your profile',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }\n      }));\n    }\n  }]);\n\n  return profile;\n}(React.Component);\n\nexport default profile;","map":{"version":3,"sources":["C:/Users/shash/photofeed/app/screens/profile.js"],"names":["React","f","auth","database","storage","PhotoList","UserAuth","profile","props","logoutUser","signOut","alert","editProfile","setState","saveProfile","name","state","username","ref","child","userId","set","fetchUserInfo","that","once","then","snapshot","exist","val","data","componentDidMount","onAuthStateChanged","user","uid","loggedin","flex","height","paddingTop","backgroundColor","borderColor","justifyContent","alignItems","flexDirection","paddingVertical","url","avatar","marginLeft","width","borderRadius","marginRight","paddingBottom","borderBottomWidth","fontWeigh","text","marginVertical","padding","borderWidth","marginTop","marginHorizontal","textAlign","color","navigation","navigate","Component"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;;;;;AAEA,SAAQC,CAAR,EAAUC,IAAV,EAAeC,QAAf,EAAwBC,OAAxB;AACA,OAAOC,SAAP;AAEA,OAAOC,QAAP;;IAGMC,O;;;;;AAEF,mBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,8BAAMA,KAAN;;AADc,UAQlBC,UARkB,GAQL,YAAM;AACfR,MAAAA,CAAC,CAACC,IAAF,GAASQ,OAAT;AACAC,MAAAA,KAAK,CAAC,YAAD,CAAL;AAEH,KAZiB;;AAAA,UAclBC,WAdkB,GAcJ,YAAM;AAChB,YAAKC,QAAL,CAAc;AAACD,QAAAA,WAAW,EAAC;AAAb,OAAd;AACH,KAhBiB;;AAAA,UAkBlBE,WAlBkB,GAkBJ,YAAM;AAChB,UAAIC,IAAI,GAAE,MAAKC,KAAL,CAAWD,IAArB;AACA,UAAIE,QAAQ,GAAE,MAAKD,KAAL,CAAWC,QAAzB;;AAEA,UAAGF,IAAI,KAAK,EAAZ,EAAe;AACXZ,QAAAA,QAAQ,CAACe,GAAT,CAAa,OAAb,EAAsBC,KAAtB,CAA4B,MAAKH,KAAL,CAAWI,MAAvC,EAA+CD,KAA/C,CAAqD,MAArD,EAA6DE,GAA7D,CAAiEN,IAAjE;AACH;;AAAA,UAAGE,QAAQ,KAAK,EAAhB,EAAmB;AAChBd,QAAAA,QAAQ,CAACe,GAAT,CAAa,OAAb,EAAsBC,KAAtB,CAA4B,MAAKH,KAAL,CAAWI,MAAvC,EAA+CD,KAA/C,CAAqD,UAArD,EAAiEE,GAAjE,CAAqEJ,QAArE;AACH;;AACD,YAAKJ,QAAL,CAAc;AAACD,QAAAA,WAAW,EAAC;AAAb,OAAd;AACH,KA5BiB;;AAAA,UA8BlBU,aA9BkB,GA8BF,UAACF,MAAD,EAAY;AACxB,UAAIG,IAAI,gCAAR;;AACApB,MAAAA,QAAQ,CAACe,GAAT,CAAa,MAAb,EAAqBC,KAArB,CAA2BC,MAA3B,EAAmCI,IAAnC,CAAwC,OAAxC,EAAiDC,IAAjD,CAAsD,UAASC,QAAT,EAAkB;AACpE,YAAMC,KAAK,GAAID,QAAQ,CAACE,GAAT,OAAkB,IAAjC;AACA,YAAGD,KAAH,EAAUE,IAAI,GAAGH,QAAQ,CAACE,GAAT,EAAP;AACNL,QAAAA,IAAI,CAACV,QAAL,CAAc;AACVI,UAAAA,QAAQ,EAAC,IADC;AAEVG,UAAAA,MAAM,EAACA;AAFG,SAAd;AAIP,OAPD;AAQH,KAxCiB;;AAAA,UA4ClBU,iBA5CkB,GA4CE,YAAM;AACtB,UAAIP,IAAI,gCAAR;;AACAtB,MAAAA,CAAC,CAACC,IAAF,GAAS6B,kBAAT,CAA4B,UAASC,IAAT,EAAc;AACtC,YAAGA,IAAH,EAAQ;AAEJT,UAAAA,IAAI,CAACD,aAAL,CAAmBU,IAAI,CAACC,GAAxB;AAEH,SAJD,MAIK;AAEDV,UAAAA,IAAI,CAACV,QAAL,CAAc;AACVqB,YAAAA,QAAQ,EAAE;AADA,WAAd;AAGH;AACJ,OAXD;AAaH,KA3DiB;;AAEd,UAAKlB,KAAL,GAAa;AACTkB,MAAAA,QAAQ,EAAE;AADD,KAAb;AAFc;AAMjB;;;;6BAuDO;AAAA;;AACJ,aACI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACC,UAAAA,IAAI,EAAC;AAAN,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM,KAAKnB,KAAL,CAAWkB,QAAX,IAAuB,IAAvB,GAEE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACC,UAAAA,IAAI,EAAC;AAAN,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACC,UAAAA,MAAM,EAAC,EAAR;AAAWC,UAAAA,UAAU,EAAC,EAAtB;AAAyBC,UAAAA,eAAe,EAAC,OAAzC;AAAiDC,UAAAA,WAAW,EAAC,GAA7D;AAAiEC,UAAAA,cAAc,EAAC,QAAhF;AAAyFC,UAAAA,UAAU,EAAC;AAApG,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADH,CADL,EAII,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACD,UAAAA,cAAc,EAAC,eAAhB;AAAgCC,UAAAA,UAAU,EAAC,QAA3C;AAAoDC,UAAAA,aAAa,EAAC,KAAlE;AAAwEC,UAAAA,eAAe,EAAC;AAAxF,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE;AAACC,UAAAA,GAAG,EAAE,KAAK5B,KAAL,CAAW6B;AAAjB,SAAf;AAAyC,QAAA,KAAK,EAAE;AAACC,UAAAA,UAAU,EAAC,EAAZ;AAAeC,UAAAA,KAAK,EAAC,GAArB;AAAyBX,UAAAA,MAAM,EAAC,GAAhC;AAAoCY,UAAAA,YAAY,EAAC;AAAjD,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACC,UAAAA,WAAW,EAAC;AAAb,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,KAAKjC,KAAL,CAAWD,IAAlB,CADJ,EAEI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,KAAKC,KAAL,CAAWC,QAAlB,CAFJ,CAFJ,CAJJ,EAWK,KAAKD,KAAL,CAAWJ,WAAX,IAA0B,IAA1B,GACD,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAC6B,UAAAA,UAAU,EAAC,QAAZ;AAAqBD,UAAAA,cAAc,EAAC,QAApC;AAA6CU,UAAAA,aAAa,EAAC,EAA3D;AAA8DC,UAAAA,iBAAiB,EAAC;AAAhF,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAACtC,QAAL,CAAc;AAACD,YAAAA,WAAW,EAAC;AAAb,WAAd,CAAL;AAAA,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACwC,UAAAA,SAAS,EAAC;AAAX,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,CADJ,EAII,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,EAKI,oBAAC,SAAD;AACA,QAAA,QAAQ,EAAE,IADV;AAEA,QAAA,WAAW,EAAE,iBAFb;AAGA,QAAA,YAAY,EAAE,sBAACC,IAAD;AAAA,iBAAS,MAAI,CAACxC,QAAL,CAAc;AAACE,YAAAA,IAAI,EAACsC;AAAN,WAAd,CAAT;AAAA,SAHd;AAIA,QAAA,KAAK,EAAE,KAAKrC,KAAL,CAAWD,IAJlB;AAKA,QAAA,KAAK,EAAE;AAACgC,UAAAA,KAAK,EAAC,GAAP;AAAWO,UAAAA,cAAc,EAAC,EAA1B;AAA6BC,UAAAA,OAAO,EAAC,CAArC;AAAuChB,UAAAA,WAAW,EAAC,MAAnD;AAA0DiB,UAAAA,WAAW,EAAC;AAAtE,SALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALJ,EAYI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZJ,EAaI,oBAAC,SAAD;AACA,QAAA,QAAQ,EAAE,IADV;AAEA,QAAA,WAAW,EAAE,qBAFb;AAGA,QAAA,YAAY,EAAE,sBAACH,IAAD;AAAA,iBAAS,MAAI,CAACxC,QAAL,CAAc;AAACI,YAAAA,QAAQ,EAACoC;AAAV,WAAd,CAAT;AAAA,SAHd;AAIA,QAAA,KAAK,EAAE,KAAKrC,KAAL,CAAWC,QAJlB;AAKA,QAAA,KAAK,EAAE;AAAC8B,UAAAA,KAAK,EAAC,GAAP;AAAWO,UAAAA,cAAc,EAAC,EAA1B;AAA6BC,UAAAA,OAAO,EAAC,CAArC;AAAuChB,UAAAA,WAAW,EAAC,MAAnD;AAA0DiB,UAAAA,WAAW,EAAC;AAAtE,SALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbJ,EAoBI,oBAAC,gBAAD;AACA,QAAA,KAAK,EAAE;AAACD,UAAAA,OAAO,EAAC,EAAT;AAAYjB,UAAAA,eAAe,EAAC;AAA5B,SADP;AAEA,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAACxB,WAAL,EAAL;AAAA,SAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACsC,UAAAA,SAAS,EAAC;AAAX,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAHJ,CApBJ,EAyBI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAzBJ,CADC,GA8BD,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACG,UAAAA,OAAO,EAAC,EAAT;AAAYJ,UAAAA,iBAAiB,EAAC;AAA9B,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,gBAAD;AACA,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAAC1C,UAAL,EAAL;AAAA,SADT;AAEA,QAAA,KAAK,EAAE;AAACgD,UAAAA,SAAS,EAAC,EAAX;AAAcC,UAAAA,gBAAgB,EAAC,EAA/B;AAAkCf,UAAAA,eAAe,EAAC,EAAlD;AAAqDK,UAAAA,YAAY,EAAC,EAAlE;AAAqET,UAAAA,WAAW,EAAC,MAAjF;AAAwFiB,UAAAA,WAAW,EAAC;AAApG,SAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAII,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACG,UAAAA,SAAS,EAAC,QAAX;AAAoBC,UAAAA,KAAK,EAAC;AAA1B,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,CADA,EASA,oBAAC,gBAAD;AACA,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAAChD,WAAL,EAAL;AAAA,SADT;AAEA,QAAA,KAAK,EAAE;AAAC6C,UAAAA,SAAS,EAAC,EAAX;AAAcC,UAAAA,gBAAgB,EAAC,EAA/B;AAAkCf,UAAAA,eAAe,EAAC,EAAlD;AAAqDK,UAAAA,YAAY,EAAC,EAAlE;AAAqET,UAAAA,WAAW,EAAC,MAAjF;AAAwFiB,UAAAA,WAAW,EAAC;AAApG,SAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACG,UAAAA,SAAS,EAAC,QAAX;AAAoBC,UAAAA,KAAK,EAAC;AAA1B,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHJ,CATA,EAcA,oBAAC,gBAAD;AACC,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAACpD,KAAL,CAAWqD,UAAX,CAAsBC,QAAtB,CAA+B,QAA/B,CAAL;AAAA,SADV;AAEC,QAAA,KAAK,EAAE;AAACxB,UAAAA,eAAe,EAAC,MAAjB;AAAwBmB,UAAAA,SAAS,EAAC,EAAlC;AAAqCC,UAAAA,gBAAgB,EAAC,EAAtD;AAAyDf,UAAAA,eAAe,EAAC,EAAzE;AAA4EK,UAAAA,YAAY,EAAC,EAAzF;AAA4FT,UAAAA,WAAW,EAAC,MAAxG;AAA+GiB,UAAAA,WAAW,EAAC;AAA3H,SAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACG,UAAAA,SAAS,EAAC,QAAX;AAAoBC,UAAAA,KAAK,EAAC;AAA1B,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAHJ,CAdA,CAzCJ,EA8DI,oBAAC,SAAD;AAAW,QAAA,MAAM,EAAI,IAArB;AAA2B,QAAA,MAAM,EAAE,KAAK5C,KAAL,CAAWI,MAA9C;AAAsD,QAAA,UAAU,EAAE,KAAKZ,KAAL,CAAWqD,UAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA9DJ,CAFF,GAqEE,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,mCAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAtER,CADJ;AA+EH;;;;EA/IiB7D,KAAK,CAAC+D,S;;AAkJ5B,eAAexD,OAAf","sourcesContent":["import React from 'react';\r\nimport {TextInput,TouchableOpacity,FlatList,StyleSheet,Text,View,Image} from 'react-native';\r\nimport {f,auth,database,storage} from '../../config/config';\r\nimport PhotoList from '../components/photoList';\r\n\r\nimport UserAuth from \"../components/auth.js\";\r\n\r\n\r\nclass profile extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            loggedin: false\r\n\r\n        }\r\n    }\r\n\r\n    logoutUser = () => {\r\n        f.auth().signOut();\r\n        alert('Logged Out');\r\n\r\n    }\r\n\r\n    editProfile = () => {\r\n        this.setState({editProfile:true})\r\n    }\r\n\r\n    saveProfile = () => {\r\n        var name= this.state.name;\r\n        var username= this.state.username;\r\n\r\n        if(name !== ''){\r\n            database.ref('users').child(this.state.userId).child('name').set(name);\r\n        }if(username !== ''){\r\n            database.ref('users').child(this.state.userId).child('username').set(username);\r\n        }\r\n        this.setState({editProfile:false});\r\n    }\r\n\r\n    fetchUserInfo = (userId) => {\r\n        var that = this;\r\n        database.ref('user').child(userId).once('value').then(function(snapshot){\r\n            const exist = (snapshot.val() !==null);\r\n            if(exist) data = snapshot.val();\r\n                that.setState({\r\n                    username:true,\r\n                    userId:userId\r\n                });\r\n        });\r\n    }\r\n\r\n\r\n\r\n    componentDidMount = () => {\r\n        var that =this;\r\n        f.auth().onAuthStateChanged(function(user){\r\n            if(user){\r\n                //Logged in\r\n                that.fetchUserInfo(user.uid);\r\n                \r\n            }else{\r\n                //not Logged in\r\n                that.setState({\r\n                    loggedin: false\r\n                })\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <View style={{flex:1}}>\r\n                { this.state.loggedin == true ? (\r\n                    //sre logged in\r\n                    <View style={{flex:1}}>\r\n                         <View style={{height:70,paddingTop:30,backgroundColor:'white',borderColor:0.5,justifyContent:'center',alignItems:'center'}}>\r\n                            <Text>profile</Text>\r\n                        </View>\r\n                        <View style={{justifyContent:'space-between',alignItems:'center',flexDirection:'row',paddingVertical:10}}>\r\n                            <Image source={{url: this.state.avatar}} style={{marginLeft:10,width:100,height:100,borderRadius:50}}/>\r\n                            <View style={{marginRight:10}}>\r\n                                <Text>{this.state.name}</Text>\r\n                                <Text>{this.state.username}</Text>\r\n                            </View>     \r\n                        </View> \r\n                        {this.state.editProfile == true ? (\r\n                        <View style={{alignItems:'center',justifyContent:'center',paddingBottom:20,borderBottomWidth:1}}>\r\n                            <TouchableOpacity onPress={()=> this.setState({editProfile:false})} >\r\n                                <Text style={{fontWeigh:'blod'}}>Cancel Editing</Text>\r\n                            </TouchableOpacity>\r\n                            <Text>Name</Text>\r\n                            <TextInput \r\n                            editable={true}\r\n                            placeholder={'Enter your name'}\r\n                            onChangeText={(text)=> this.setState({name:text})}\r\n                            value={this.state.name}\r\n                            style={{width:250,marginVertical:10,padding:5,borderColor:'grey',borderWidth:1}}\r\n                            />\r\n                            <Text>UserName</Text>\r\n                            <TextInput \r\n                            editable={true}\r\n                            placeholder={'Enter your UserName'}\r\n                            onChangeText={(text)=> this.setState({username:text})}\r\n                            value={this.state.username}\r\n                            style={{width:250,marginVertical:10,padding:5,borderColor:'grey',borderWidth:1}}\r\n                            />\r\n                            <TouchableOpacity \r\n                            style={{padding:10,backgroundColor:'blue'}}\r\n                            onPress={()=> this.saveProfile()}>\r\n                                <Text style={{fontWeigh:'blod'}}>Cancel Editing</Text>\r\n                            </TouchableOpacity>\r\n                            <Text style={{}} >Edit Save Changes</Text>\r\n                        </View>\r\n\r\n                        ) : (\r\n                        <View style={{padding:20,borderBottomWidth:1}}>\r\n                        <TouchableOpacity \r\n                        onPress={() =>this.logoutUser()}\r\n                        style={{marginTop:10,marginHorizontal:40,paddingVertical:15,borderRadius:20,borderColor:'grey',borderWidth:1.5}}>\r\n                            \r\n                            <Text style={{textAlign:'center',color:'grey'}}>Logout</Text>\r\n                        </TouchableOpacity>\r\n\r\n\r\n                        <TouchableOpacity \r\n                        onPress={() =>this.editProfile()}\r\n                        style={{marginTop:10,marginHorizontal:40,paddingVertical:15,borderRadius:20,borderColor:'grey',borderWidth:1.5}}>\r\n                            <Text style={{textAlign:'center',color:'grey'}}>Edit Profile</Text>\r\n                        </TouchableOpacity>\r\n                        <TouchableOpacity\r\n                         onPress={()=> this.props.navigation.navigate('Upload')}\r\n                         style={{backgroundColor:'grey',marginTop:10,marginHorizontal:40,paddingVertical:35,borderRadius:20,borderColor:'grey',borderWidth:1.5}}>\r\n                            <Text style={{textAlign:'center',color:'white'}}>Upload New </Text>\r\n                        </TouchableOpacity>\r\n                        </View> \r\n                    )}\r\n                        <PhotoList isuser = {true} userId={this.state.userId} navigation={this.props.navigation}/>\r\n                    </View> \r\n\r\n                ) : (\r\n                    //not logged in\r\n                    <UserAuth message={'Please login to view your profile'} />\r\n                )}\r\n\r\n             \r\n            </View>\r\n\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default profile;\r\n"]},"metadata":{},"sourceType":"module"}