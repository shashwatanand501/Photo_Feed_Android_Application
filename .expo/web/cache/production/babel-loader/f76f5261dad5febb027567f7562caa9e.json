{"ast":null,"code":"import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _extends from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import Image from\"react-native-web/dist/exports/Image\";import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import MaskedViewIOS from\"react-native-web/dist/exports/MaskedViewIOS\";import{SafeAreaView,withOrientation}from'react-navigation';import HeaderTitle from\"./HeaderTitle\";import HeaderBackButton from\"./HeaderBackButton\";import ModularHeaderBackButton from\"./ModularHeaderBackButton\";import HeaderStyleInterpolator from\"./HeaderStyleInterpolator\";var APPBAR_HEIGHT=Platform.OS==='ios'?44:56;var STATUSBAR_HEIGHT=Platform.OS==='ios'?20:0;var TITLE_OFFSET_CENTER_ALIGN=Platform.OS==='ios'?70:56;var TITLE_OFFSET_LEFT_ALIGN=Platform.OS==='ios'?20:56;var getTitleOffsets=function getTitleOffsets(layoutPreset,forceBackTitle,hasLeftComponent,hasRightComponent){if(layoutPreset==='left'){var style={left:TITLE_OFFSET_LEFT_ALIGN,right:TITLE_OFFSET_LEFT_ALIGN};if(!hasLeftComponent){style.left=0;}if(!hasRightComponent){style.right=0;}return style;}else if(layoutPreset==='center'){var _style={left:TITLE_OFFSET_CENTER_ALIGN,right:TITLE_OFFSET_CENTER_ALIGN};if(!hasLeftComponent&&!hasRightComponent){_style.left=0;_style.right=0;}return _style;}};var getAppBarHeight=function getAppBarHeight(isLandscape){return Platform.OS==='ios'?isLandscape&&!Platform.isPad?32:44:56;};var Header=function(_React$PureComponent){_inherits(Header,_React$PureComponent);var _super=_createSuper(Header);function Header(){var _this;_classCallCheck(this,Header);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={widths:{}};_this._renderTitleComponent=function(props){var layoutPreset=_this.props.layoutPreset;var options=props.scene.descriptor.options;var headerTitle=options.headerTitle;if(React.isValidElement(headerTitle)){return headerTitle;}var titleString=_this._getHeaderTitleString(props.scene);var titleStyle=options.headerTitleStyle;var color=options.headerTintColor;var allowFontScaling=options.headerTitleAllowFontScaling;var onLayout=layoutPreset==='center'?function(e){_this.setState({widths:_objectSpread(_objectSpread({},_this.state.widths),{},_defineProperty({},props.scene.key,e.nativeEvent.layout.width))});}:undefined;var HeaderTitleComponent=headerTitle&&typeof headerTitle!=='string'?headerTitle:HeaderTitle;return React.createElement(HeaderTitleComponent,{onLayout:onLayout,allowFontScaling:allowFontScaling==null?true:allowFontScaling,style:[color?{color:color}:null,layoutPreset==='center'?{textAlign:'center'}:{textAlign:'left'},titleStyle]},titleString);};_this._renderLeftComponent=function(props){var options=props.scene.descriptor.options;if(React.isValidElement(options.headerLeft)||options.headerLeft===null){return options.headerLeft;}if(!options.headerLeft&&props.scene.index===0){return;}var backButtonTitle=_this._getBackButtonTitleString(props.scene);var truncatedBackButtonTitle=_this._getTruncatedBackButtonTitle(props.scene);var width=_this.state.widths[props.scene.key]?(_this.props.layout.initWidth-_this.state.widths[props.scene.key])/2:undefined;var RenderedLeftComponent=options.headerLeft||HeaderBackButton;var goBack=function goBack(){requestAnimationFrame(function(){props.scene.descriptor.navigation.goBack(props.scene.descriptor.key);});};return React.createElement(RenderedLeftComponent,{onPress:goBack,pressColorAndroid:options.headerPressColorAndroid,tintColor:options.headerTintColor,backImage:options.headerBackImage,title:backButtonTitle,truncatedTitle:truncatedBackButtonTitle,backTitleVisible:_this.props.backTitleVisible,titleStyle:options.headerBackTitleStyle,layoutPreset:_this.props.layoutPreset,width:width});};_this._renderModularLeftComponent=function(props,ButtonContainerComponent,LabelContainerComponent){var _props$scene$descript=props.scene.descriptor,options=_props$scene$descript.options,navigation=_props$scene$descript.navigation;var backButtonTitle=_this._getBackButtonTitleString(props.scene);var truncatedBackButtonTitle=_this._getTruncatedBackButtonTitle(props.scene);var width=_this.state.widths[props.scene.key]?(_this.props.layout.initWidth-_this.state.widths[props.scene.key])/2:undefined;var goBack=function goBack(){requestAnimationFrame(function(){navigation.goBack(props.scene.descriptor.key);});};return React.createElement(ModularHeaderBackButton,{onPress:goBack,ButtonContainerComponent:ButtonContainerComponent,LabelContainerComponent:LabelContainerComponent,pressColorAndroid:options.headerPressColorAndroid,tintColor:options.headerTintColor,backImage:options.headerBackImage,title:backButtonTitle,truncatedTitle:truncatedBackButtonTitle,titleStyle:options.headerBackTitleStyle,width:width});};_this._renderRightComponent=function(props){var headerRight=props.scene.descriptor.options.headerRight;return headerRight||null;};return _this;}_createClass(Header,[{key:\"_getHeaderTitleString\",value:function _getHeaderTitleString(scene){var options=scene.descriptor.options;if(typeof options.headerTitle==='string'){return options.headerTitle;}if(options.title&&typeof options.title!=='string'&&__DEV__){throw new Error(\"Invalid title for route \\\"\"+scene.route.routeName+\"\\\" - title must be string or null, instead it was of type \"+typeof options.title);}return options.title;}},{key:\"_getLastScene\",value:function _getLastScene(scene){return this.props.scenes.find(function(s){return s.index===scene.index-1;});}},{key:\"_getBackButtonTitleString\",value:function _getBackButtonTitleString(scene){var lastScene=this._getLastScene(scene);if(!lastScene){return null;}var headerBackTitle=lastScene.descriptor.options.headerBackTitle;if(headerBackTitle||headerBackTitle===null){return headerBackTitle;}return this._getHeaderTitleString(lastScene);}},{key:\"_getTruncatedBackButtonTitle\",value:function _getTruncatedBackButtonTitle(scene){var lastScene=this._getLastScene(scene);if(!lastScene){return null;}return lastScene.descriptor.options.headerTruncatedBackTitle;}},{key:\"_renderLeft\",value:function _renderLeft(props){var options=props.scene.descriptor.options;var transitionPreset=this.props.transitionPreset;var style=props.style;if(options.headerLeftContainerStyle){style=[style,options.headerLeftContainerStyle];}if(transitionPreset!=='uikit'||options.headerBackImage||options.headerLeft||options.headerLeft===null){return this._renderSubView(_objectSpread(_objectSpread({},props),{},{style:style}),'left',this._renderLeftComponent,this.props.leftInterpolator);}else{return this._renderModularSubView(_objectSpread(_objectSpread({},props),{},{style:style}),'left',this._renderModularLeftComponent,this.props.leftLabelInterpolator,this.props.leftButtonInterpolator);}}},{key:\"_renderTitle\",value:function _renderTitle(props,options){var _this$props=this.props,layoutPreset=_this$props.layoutPreset,transitionPreset=_this$props.transitionPreset;var style=[{justifyContent:layoutPreset==='center'?'center':'flex-start'},getTitleOffsets(layoutPreset,false,options.hasLeftComponent,options.hasRightComponent),options.headerTitleContainerStyle];return this._renderSubView(_objectSpread(_objectSpread({},props),{},{style:style}),'title',this._renderTitleComponent,transitionPreset==='uikit'?this.props.titleFromLeftInterpolator:this.props.titleInterpolator);}},{key:\"_renderRight\",value:function _renderRight(props){var options=props.scene.descriptor.options;var style=props.style;if(options.headerRightContainerStyle){style=[style,options.headerRightContainerStyle];}return this._renderSubView(_objectSpread(_objectSpread({},props),{},{style:style}),'right',this._renderRightComponent,this.props.rightInterpolator);}},{key:\"_renderBackground\",value:function _renderBackground(props){var _props$scene=props.scene,index=_props$scene.index,options=_props$scene.descriptor.options;var offset=this.props.navigation.state.index-index;if(Math.abs(offset)>2){return null;}return this._renderSubView(_objectSpread(_objectSpread({},props),{},{style:StyleSheet.absoluteFill}),'background',function(){return options.headerBackground;},this.props.backgroundInterpolator);}},{key:\"_renderModularSubView\",value:function _renderModularSubView(props,name,renderer,labelStyleInterpolator,buttonStyleInterpolator){var _this2=this;var scene=props.scene;var index=scene.index,isStale=scene.isStale,key=scene.key;if(index===0){return;}var offset=this.props.navigation.state.index-index;if(Math.abs(offset)>2){return null;}var ButtonContainer=function ButtonContainer(_ref){var children=_ref.children;return React.createElement(Animated.View,{style:[buttonStyleInterpolator(_objectSpread(_objectSpread({},_this2.props),props))]},children);};var LabelContainer=function LabelContainer(_ref2){var children=_ref2.children;return React.createElement(Animated.View,{style:[labelStyleInterpolator(_objectSpread(_objectSpread({},_this2.props),props))]},children);};var subView=renderer(props,ButtonContainer,LabelContainer);if(subView===null){return subView;}var pointerEvents=offset!==0||isStale?'none':'box-none';return React.createElement(View,{key:name+\"_\"+key,pointerEvents:pointerEvents,style:[styles.item,styles[name],props.style]},subView);}},{key:\"_renderSubView\",value:function _renderSubView(props,name,renderer,styleInterpolator){var scene=props.scene;var index=scene.index,isStale=scene.isStale,key=scene.key;var offset=this.props.navigation.state.index-index;if(Math.abs(offset)>2){return null;}var subView=renderer(props);if(subView==null){return null;}var pointerEvents=offset!==0||isStale?'none':'box-none';return React.createElement(Animated.View,{pointerEvents:pointerEvents,key:name+\"_\"+key,style:[styles.item,styles[name],props.style,styleInterpolator(_objectSpread(_objectSpread({},this.props),props))]},subView);}},{key:\"_renderHeader\",value:function _renderHeader(props){var options=props.scene.descriptor.options;if(options.header===null){return null;}var left=this._renderLeft(props);var right=this._renderRight(props);var title=this._renderTitle(props,{hasLeftComponent:!!left,hasRightComponent:!!right,headerTitleContainerStyle:options.headerTitleContainerStyle});var transitionPreset=this.props.transitionPreset;var wrapperProps={style:styles.header,key:\"scene_\"+props.scene.key};if(options.headerLeft||options.headerBackImage||Platform.OS!=='ios'||transitionPreset!=='uikit'){return React.createElement(View,wrapperProps,title,left,right);}else{return React.createElement(MaskedViewIOS,_extends({},wrapperProps,{maskElement:React.createElement(View,{style:styles.iconMaskContainer},React.createElement(Image,{source:require(\"../assets/back-icon-mask.png\"),style:styles.iconMask}),React.createElement(View,{style:styles.iconMaskFillerRect}))}),title,left,right);}}},{key:\"render\",value:function render(){var _this3=this;var appBar;var background;var _this$props2=this.props,mode=_this$props2.mode,scene=_this$props2.scene,isLandscape=_this$props2.isLandscape;if(mode==='float'){var scenesByIndex={};this.props.scenes.forEach(function(scene){scenesByIndex[scene.index]=scene;});var scenesProps=Object.values(scenesByIndex).map(function(scene){return{position:_this3.props.position,progress:_this3.props.progress,scene:scene};});appBar=scenesProps.map(this._renderHeader,this);background=scenesProps.map(this._renderBackground,this);}else{var headerProps={position:new Animated.Value(this.props.scene.index),progress:new Animated.Value(0),scene:this.props.scene};appBar=this._renderHeader(headerProps);background=this._renderBackground(headerProps);}var options=scene.descriptor.options;var _options$headerStyle=options.headerStyle,headerStyle=_options$headerStyle===void 0?{}:_options$headerStyle;var headerStyleObj=StyleSheet.flatten(headerStyle);var appBarHeight=getAppBarHeight(isLandscape);var alignItems=headerStyleObj.alignItems,justifyContent=headerStyleObj.justifyContent,flex=headerStyleObj.flex,flexDirection=headerStyleObj.flexDirection,flexGrow=headerStyleObj.flexGrow,flexShrink=headerStyleObj.flexShrink,flexBasis=headerStyleObj.flexBasis,flexWrap=headerStyleObj.flexWrap,position=headerStyleObj.position,padding=headerStyleObj.padding,paddingHorizontal=headerStyleObj.paddingHorizontal,paddingRight=headerStyleObj.paddingRight,paddingLeft=headerStyleObj.paddingLeft,top=headerStyleObj.top,right=headerStyleObj.right,bottom=headerStyleObj.bottom,left=headerStyleObj.left,safeHeaderStyle=_objectWithoutProperties(headerStyleObj,[\"alignItems\",\"justifyContent\",\"flex\",\"flexDirection\",\"flexGrow\",\"flexShrink\",\"flexBasis\",\"flexWrap\",\"position\",\"padding\",\"paddingHorizontal\",\"paddingRight\",\"paddingLeft\",\"top\",\"right\",\"bottom\",\"left\"]);if(__DEV__){warnIfHeaderStyleDefined(alignItems,'alignItems');warnIfHeaderStyleDefined(justifyContent,'justifyContent');warnIfHeaderStyleDefined(flex,'flex');warnIfHeaderStyleDefined(flexDirection,'flexDirection');warnIfHeaderStyleDefined(flexGrow,'flexGrow');warnIfHeaderStyleDefined(flexShrink,'flexShrink');warnIfHeaderStyleDefined(flexBasis,'flexBasis');warnIfHeaderStyleDefined(flexWrap,'flexWrap');warnIfHeaderStyleDefined(padding,'padding');warnIfHeaderStyleDefined(position,'position');warnIfHeaderStyleDefined(paddingHorizontal,'paddingHorizontal');warnIfHeaderStyleDefined(paddingRight,'paddingRight');warnIfHeaderStyleDefined(paddingLeft,'paddingLeft');warnIfHeaderStyleDefined(top,'top');warnIfHeaderStyleDefined(right,'right');warnIfHeaderStyleDefined(bottom,'bottom');warnIfHeaderStyleDefined(left,'left');}var containerStyles=[options.headerTransparent?styles.transparentContainer:styles.container,{height:appBarHeight},safeHeaderStyle];var headerForceInset=options.headerForceInset;var forceInset=headerForceInset||{top:'always',bottom:'never'};return React.createElement(Animated.View,{style:[this.props.layoutInterpolator(this.props),Platform.OS==='ios'&&!options.headerTransparent?{backgroundColor:safeHeaderStyle.backgroundColor||DEFAULT_BACKGROUND_COLOR}:null]},React.createElement(SafeAreaView,{forceInset:forceInset,style:containerStyles},background,React.createElement(View,{style:styles.flexOne},appBar)));}}],[{key:\"HEIGHT\",get:function get(){return APPBAR_HEIGHT+STATUSBAR_HEIGHT;}}]);return Header;}(React.PureComponent);Header.defaultProps={layoutInterpolator:HeaderStyleInterpolator.forLayout,leftInterpolator:HeaderStyleInterpolator.forLeft,leftButtonInterpolator:HeaderStyleInterpolator.forLeftButton,leftLabelInterpolator:HeaderStyleInterpolator.forLeftLabel,titleFromLeftInterpolator:HeaderStyleInterpolator.forCenterFromLeft,titleInterpolator:HeaderStyleInterpolator.forCenter,rightInterpolator:HeaderStyleInterpolator.forRight,backgroundInterpolator:HeaderStyleInterpolator.forBackground};function warnIfHeaderStyleDefined(value,styleProp){if(styleProp==='position'&&value==='absolute'){console.warn(\"position: 'absolute' is not supported on headerStyle. If you would like to render content under the header, use the headerTransparent navigationOption.\");}else if(value!==undefined){console.warn(styleProp+\" was given a value of \"+value+\", this has no effect on headerStyle.\");}}var platformContainerStyles;if(Platform.OS==='ios'){platformContainerStyles={borderBottomWidth:StyleSheet.hairlineWidth,borderBottomColor:'#A7A7AA'};}else{platformContainerStyles={shadowColor:'black',shadowOpacity:0.1,shadowRadius:StyleSheet.hairlineWidth,shadowOffset:{height:StyleSheet.hairlineWidth},elevation:4};}var DEFAULT_BACKGROUND_COLOR='#FFF';var styles=StyleSheet.create({container:_objectSpread({backgroundColor:DEFAULT_BACKGROUND_COLOR},platformContainerStyles),transparentContainer:_objectSpread(_objectSpread({position:'absolute',top:0,left:0,right:0},platformContainerStyles),{},{borderBottomWidth:0,borderBottomColor:'transparent',elevation:0}),header:_objectSpread(_objectSpread({},StyleSheet.absoluteFillObject),{},{flexDirection:'row'}),item:{backgroundColor:'transparent'},iconMaskContainer:{flex:1,flexDirection:'row',justifyContent:'center'},iconMaskFillerRect:{flex:1,backgroundColor:'#d8d8d8',marginLeft:-3},iconMask:{height:21,width:12,marginLeft:9,marginTop:-0.5,alignSelf:'center',resizeMode:'contain',transform:[{scaleX:I18nManager.isRTL?-1:1}]},title:{bottom:0,top:0,position:'absolute',alignItems:'center',flexDirection:'row'},left:{left:0,bottom:0,top:0,position:'absolute',alignItems:'center',flexDirection:'row'},right:{right:0,bottom:0,top:0,position:'absolute',flexDirection:'row',alignItems:'center'},flexOne:{flex:1}});export default withOrientation(Header);","map":{"version":3,"sources":["E:/photofeed/node_modules/react-navigation-stack/dist/views/Header/Header.js"],"names":["React","SafeAreaView","withOrientation","HeaderTitle","HeaderBackButton","ModularHeaderBackButton","HeaderStyleInterpolator","APPBAR_HEIGHT","Platform","OS","STATUSBAR_HEIGHT","TITLE_OFFSET_CENTER_ALIGN","TITLE_OFFSET_LEFT_ALIGN","getTitleOffsets","layoutPreset","forceBackTitle","hasLeftComponent","hasRightComponent","style","left","right","getAppBarHeight","isLandscape","isPad","Header","state","widths","_renderTitleComponent","props","options","scene","descriptor","headerTitle","isValidElement","titleString","_getHeaderTitleString","titleStyle","headerTitleStyle","color","headerTintColor","allowFontScaling","headerTitleAllowFontScaling","onLayout","e","setState","key","nativeEvent","layout","width","undefined","HeaderTitleComponent","textAlign","_renderLeftComponent","headerLeft","index","backButtonTitle","_getBackButtonTitleString","truncatedBackButtonTitle","_getTruncatedBackButtonTitle","initWidth","RenderedLeftComponent","goBack","requestAnimationFrame","navigation","headerPressColorAndroid","headerBackImage","backTitleVisible","headerBackTitleStyle","_renderModularLeftComponent","ButtonContainerComponent","LabelContainerComponent","_renderRightComponent","headerRight","title","__DEV__","Error","route","routeName","scenes","find","s","lastScene","_getLastScene","headerBackTitle","headerTruncatedBackTitle","transitionPreset","headerLeftContainerStyle","_renderSubView","leftInterpolator","_renderModularSubView","leftLabelInterpolator","leftButtonInterpolator","justifyContent","headerTitleContainerStyle","titleFromLeftInterpolator","titleInterpolator","headerRightContainerStyle","rightInterpolator","offset","Math","abs","StyleSheet","absoluteFill","headerBackground","backgroundInterpolator","name","renderer","labelStyleInterpolator","buttonStyleInterpolator","isStale","ButtonContainer","children","LabelContainer","subView","pointerEvents","styles","item","styleInterpolator","header","_renderLeft","_renderRight","_renderTitle","wrapperProps","iconMaskContainer","require","iconMask","iconMaskFillerRect","appBar","background","mode","scenesByIndex","forEach","scenesProps","Object","values","map","position","progress","_renderHeader","_renderBackground","headerProps","Animated","Value","headerStyle","headerStyleObj","flatten","appBarHeight","alignItems","flex","flexDirection","flexGrow","flexShrink","flexBasis","flexWrap","padding","paddingHorizontal","paddingRight","paddingLeft","top","bottom","safeHeaderStyle","warnIfHeaderStyleDefined","containerStyles","headerTransparent","transparentContainer","container","height","headerForceInset","forceInset","layoutInterpolator","backgroundColor","DEFAULT_BACKGROUND_COLOR","flexOne","PureComponent","defaultProps","forLayout","forLeft","forLeftButton","forLeftLabel","forCenterFromLeft","forCenter","forRight","forBackground","value","styleProp","console","warn","platformContainerStyles","borderBottomWidth","hairlineWidth","borderBottomColor","shadowColor","shadowOpacity","shadowRadius","shadowOffset","elevation","create","absoluteFillObject","marginLeft","marginTop","alignSelf","resizeMode","transform","scaleX","I18nManager","isRTL"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { Animated, Image, Platform, StyleSheet, View, I18nManager, MaskedViewIOS } from 'react-native';\n\nimport { SafeAreaView, withOrientation } from 'react-navigation';\n\nimport HeaderTitle from './HeaderTitle';\nimport HeaderBackButton from './HeaderBackButton';\nimport ModularHeaderBackButton from './ModularHeaderBackButton';\nimport HeaderStyleInterpolator from './HeaderStyleInterpolator';\n\nconst APPBAR_HEIGHT = Platform.OS === 'ios' ? 44 : 56;\nconst STATUSBAR_HEIGHT = Platform.OS === 'ios' ? 20 : 0;\n\n// These can be adjusted by using headerTitleContainerStyle on navigationOptions\nconst TITLE_OFFSET_CENTER_ALIGN = Platform.OS === 'ios' ? 70 : 56;\nconst TITLE_OFFSET_LEFT_ALIGN = Platform.OS === 'ios' ? 20 : 56;\n\nconst getTitleOffsets = (layoutPreset, forceBackTitle, hasLeftComponent, hasRightComponent) => {\n  if (layoutPreset === 'left') {\n    // Maybe at some point we should do something different if the back title is\n    // explicitly enabled, for now people can control it manually\n\n    let style = {\n      left: TITLE_OFFSET_LEFT_ALIGN,\n      right: TITLE_OFFSET_LEFT_ALIGN\n    };\n\n    if (!hasLeftComponent) {\n      style.left = 0;\n    }\n    if (!hasRightComponent) {\n      style.right = 0;\n    }\n\n    return style;\n  } else if (layoutPreset === 'center') {\n    let style = {\n      left: TITLE_OFFSET_CENTER_ALIGN,\n      right: TITLE_OFFSET_CENTER_ALIGN\n    };\n    if (!hasLeftComponent && !hasRightComponent) {\n      style.left = 0;\n      style.right = 0;\n    }\n\n    return style;\n  }\n};\n\nconst getAppBarHeight = isLandscape => {\n  return Platform.OS === 'ios' ? isLandscape && !Platform.isPad ? 32 : 44 : 56;\n};\n\nclass Header extends React.PureComponent {\n  static get HEIGHT() {\n    return APPBAR_HEIGHT + STATUSBAR_HEIGHT;\n  }\n\n  static defaultProps = {\n    layoutInterpolator: HeaderStyleInterpolator.forLayout,\n    leftInterpolator: HeaderStyleInterpolator.forLeft,\n    leftButtonInterpolator: HeaderStyleInterpolator.forLeftButton,\n    leftLabelInterpolator: HeaderStyleInterpolator.forLeftLabel,\n    titleFromLeftInterpolator: HeaderStyleInterpolator.forCenterFromLeft,\n    titleInterpolator: HeaderStyleInterpolator.forCenter,\n    rightInterpolator: HeaderStyleInterpolator.forRight,\n    backgroundInterpolator: HeaderStyleInterpolator.forBackground\n  };\n\n  state = {\n    widths: {}\n  };\n\n  _getHeaderTitleString(scene) {\n    const options = scene.descriptor.options;\n    if (typeof options.headerTitle === 'string') {\n      return options.headerTitle;\n    }\n\n    if (options.title && typeof options.title !== 'string' && __DEV__) {\n      throw new Error(`Invalid title for route \"${scene.route.routeName}\" - title must be string or null, instead it was of type ${typeof options.title}`);\n    }\n\n    return options.title;\n  }\n\n  _getLastScene(scene) {\n    return this.props.scenes.find(s => s.index === scene.index - 1);\n  }\n\n  _getBackButtonTitleString(scene) {\n    const lastScene = this._getLastScene(scene);\n    if (!lastScene) {\n      return null;\n    }\n    const { headerBackTitle } = lastScene.descriptor.options;\n    if (headerBackTitle || headerBackTitle === null) {\n      return headerBackTitle;\n    }\n    return this._getHeaderTitleString(lastScene);\n  }\n\n  _getTruncatedBackButtonTitle(scene) {\n    const lastScene = this._getLastScene(scene);\n    if (!lastScene) {\n      return null;\n    }\n    return lastScene.descriptor.options.headerTruncatedBackTitle;\n  }\n\n  _renderTitleComponent = props => {\n    const { layoutPreset } = this.props;\n    const { options } = props.scene.descriptor;\n    const headerTitle = options.headerTitle;\n    if (React.isValidElement(headerTitle)) {\n      return headerTitle;\n    }\n    const titleString = this._getHeaderTitleString(props.scene);\n\n    const titleStyle = options.headerTitleStyle;\n    const color = options.headerTintColor;\n    const allowFontScaling = options.headerTitleAllowFontScaling;\n\n    // When title is centered, the width of left/right components depends on the\n    // calculated size of the title.\n    const onLayout = layoutPreset === 'center' ? e => {\n      this.setState({\n        widths: {\n          ...this.state.widths,\n          [props.scene.key]: e.nativeEvent.layout.width\n        }\n      });\n    } : undefined;\n\n    const HeaderTitleComponent = headerTitle && typeof headerTitle !== 'string' ? headerTitle : HeaderTitle;\n    return <HeaderTitleComponent onLayout={onLayout} allowFontScaling={allowFontScaling == null ? true : allowFontScaling} style={[color ? { color } : null, layoutPreset === 'center' ? { textAlign: 'center' } : { textAlign: 'left' }, titleStyle]}>\n        {titleString}\n      </HeaderTitleComponent>;\n  };\n\n  _renderLeftComponent = props => {\n    const { options } = props.scene.descriptor;\n    if (React.isValidElement(options.headerLeft) || options.headerLeft === null) {\n      return options.headerLeft;\n    }\n\n    if (!options.headerLeft && props.scene.index === 0) {\n      return;\n    }\n\n    const backButtonTitle = this._getBackButtonTitleString(props.scene);\n    const truncatedBackButtonTitle = this._getTruncatedBackButtonTitle(props.scene);\n    const width = this.state.widths[props.scene.key] ? (this.props.layout.initWidth - this.state.widths[props.scene.key]) / 2 : undefined;\n    const RenderedLeftComponent = options.headerLeft || HeaderBackButton;\n    const goBack = () => {\n      // Go back on next tick because button ripple effect needs to happen on Android\n      requestAnimationFrame(() => {\n        props.scene.descriptor.navigation.goBack(props.scene.descriptor.key);\n      });\n    };\n    return <RenderedLeftComponent onPress={goBack} pressColorAndroid={options.headerPressColorAndroid} tintColor={options.headerTintColor} backImage={options.headerBackImage} title={backButtonTitle} truncatedTitle={truncatedBackButtonTitle} backTitleVisible={this.props.backTitleVisible} titleStyle={options.headerBackTitleStyle} layoutPreset={this.props.layoutPreset} width={width} />;\n  };\n\n  _renderModularLeftComponent = (props, ButtonContainerComponent, LabelContainerComponent) => {\n    const { options, navigation } = props.scene.descriptor;\n    const backButtonTitle = this._getBackButtonTitleString(props.scene);\n    const truncatedBackButtonTitle = this._getTruncatedBackButtonTitle(props.scene);\n    const width = this.state.widths[props.scene.key] ? (this.props.layout.initWidth - this.state.widths[props.scene.key]) / 2 : undefined;\n\n    const goBack = () => {\n      // Go back on next tick because button ripple effect needs to happen on Android\n      requestAnimationFrame(() => {\n        navigation.goBack(props.scene.descriptor.key);\n      });\n    };\n\n    return <ModularHeaderBackButton onPress={goBack} ButtonContainerComponent={ButtonContainerComponent} LabelContainerComponent={LabelContainerComponent} pressColorAndroid={options.headerPressColorAndroid} tintColor={options.headerTintColor} backImage={options.headerBackImage} title={backButtonTitle} truncatedTitle={truncatedBackButtonTitle} titleStyle={options.headerBackTitleStyle} width={width} />;\n  };\n\n  _renderRightComponent = props => {\n    const { headerRight } = props.scene.descriptor.options;\n    return headerRight || null;\n  };\n\n  _renderLeft(props) {\n    const { options } = props.scene.descriptor;\n\n    const { transitionPreset } = this.props;\n\n    let { style } = props;\n    if (options.headerLeftContainerStyle) {\n      style = [style, options.headerLeftContainerStyle];\n    }\n\n    // On Android, or if we have a custom header left, or if we have a custom back image, we\n    // do not use the modular header (which is the one that imitates UINavigationController)\n    if (transitionPreset !== 'uikit' || options.headerBackImage || options.headerLeft || options.headerLeft === null) {\n      return this._renderSubView({ ...props, style }, 'left', this._renderLeftComponent, this.props.leftInterpolator);\n    } else {\n      return this._renderModularSubView({ ...props, style }, 'left', this._renderModularLeftComponent, this.props.leftLabelInterpolator, this.props.leftButtonInterpolator);\n    }\n  }\n\n  _renderTitle(props, options) {\n    const { layoutPreset, transitionPreset } = this.props;\n    let style = [{ justifyContent: layoutPreset === 'center' ? 'center' : 'flex-start' }, getTitleOffsets(layoutPreset, false, options.hasLeftComponent, options.hasRightComponent), options.headerTitleContainerStyle];\n\n    return this._renderSubView({ ...props, style }, 'title', this._renderTitleComponent, transitionPreset === 'uikit' ? this.props.titleFromLeftInterpolator : this.props.titleInterpolator);\n  }\n\n  _renderRight(props) {\n    const { options } = props.scene.descriptor;\n\n    let { style } = props;\n    if (options.headerRightContainerStyle) {\n      style = [style, options.headerRightContainerStyle];\n    }\n\n    return this._renderSubView({ ...props, style }, 'right', this._renderRightComponent, this.props.rightInterpolator);\n  }\n\n  _renderBackground(props) {\n    const {\n      index,\n      descriptor: { options }\n    } = props.scene;\n\n    const offset = this.props.navigation.state.index - index;\n\n    if (Math.abs(offset) > 2) {\n      // Scene is far away from the active scene. Hides it to avoid unnecessary\n      // rendering.\n      return null;\n    }\n\n    return this._renderSubView({ ...props, style: StyleSheet.absoluteFill }, 'background', () => options.headerBackground, this.props.backgroundInterpolator);\n  }\n\n  _renderModularSubView(props, name, renderer, labelStyleInterpolator, buttonStyleInterpolator) {\n    const { scene } = props;\n    const { index, isStale, key } = scene;\n\n    // Never render a modular back button on the first screen in a stack.\n    if (index === 0) {\n      return;\n    }\n\n    const offset = this.props.navigation.state.index - index;\n\n    if (Math.abs(offset) > 2) {\n      // Scene is far away from the active scene. Hides it to avoid unnecessary\n      // rendering.\n      return null;\n    }\n\n    const ButtonContainer = ({ children }) => <Animated.View style={[buttonStyleInterpolator({ ...this.props, ...props })]}>\n        {children}\n      </Animated.View>;\n\n    const LabelContainer = ({ children }) => <Animated.View style={[labelStyleInterpolator({ ...this.props, ...props })]}>\n        {children}\n      </Animated.View>;\n\n    const subView = renderer(props, ButtonContainer, LabelContainer);\n\n    if (subView === null) {\n      return subView;\n    }\n\n    const pointerEvents = offset !== 0 || isStale ? 'none' : 'box-none';\n\n    return <View key={`${name}_${key}`} pointerEvents={pointerEvents} style={[styles.item, styles[name], props.style]}>\n        {subView}\n      </View>;\n  }\n\n  _renderSubView(props, name, renderer, styleInterpolator) {\n    const { scene } = props;\n    const { index, isStale, key } = scene;\n\n    const offset = this.props.navigation.state.index - index;\n\n    if (Math.abs(offset) > 2) {\n      // Scene is far away from the active scene. Hides it to avoid unnecessary\n      // rendering.\n      return null;\n    }\n\n    const subView = renderer(props);\n\n    if (subView == null) {\n      return null;\n    }\n\n    const pointerEvents = offset !== 0 || isStale ? 'none' : 'box-none';\n\n    return <Animated.View pointerEvents={pointerEvents} key={`${name}_${key}`} style={[styles.item, styles[name], props.style, styleInterpolator({\n      ...this.props,\n      ...props\n    })]}>\n        {subView}\n      </Animated.View>;\n  }\n\n  _renderHeader(props) {\n    const { options } = props.scene.descriptor;\n    if (options.header === null) {\n      return null;\n    }\n    const left = this._renderLeft(props);\n    const right = this._renderRight(props);\n    const title = this._renderTitle(props, {\n      hasLeftComponent: !!left,\n      hasRightComponent: !!right,\n      headerTitleContainerStyle: options.headerTitleContainerStyle\n    });\n\n    const { transitionPreset } = this.props;\n\n    const wrapperProps = {\n      style: styles.header,\n      key: `scene_${props.scene.key}`\n    };\n\n    if (options.headerLeft || options.headerBackImage || Platform.OS !== 'ios' || transitionPreset !== 'uikit') {\n      return <View {...wrapperProps}>\n          {title}\n          {left}\n          {right}\n        </View>;\n    } else {\n      return <MaskedViewIOS {...wrapperProps} maskElement={<View style={styles.iconMaskContainer}>\n              <Image source={require('../assets/back-icon-mask.png')} style={styles.iconMask} />\n              <View style={styles.iconMaskFillerRect} />\n            </View>}>\n          {title}\n          {left}\n          {right}\n        </MaskedViewIOS>;\n    }\n  }\n\n  render() {\n    let appBar;\n    let background;\n    const { mode, scene, isLandscape } = this.props;\n\n    if (mode === 'float') {\n      const scenesByIndex = {};\n      this.props.scenes.forEach(scene => {\n        scenesByIndex[scene.index] = scene;\n      });\n      const scenesProps = Object.values(scenesByIndex).map(scene => ({\n        position: this.props.position,\n        progress: this.props.progress,\n        scene\n      }));\n      appBar = scenesProps.map(this._renderHeader, this);\n      background = scenesProps.map(this._renderBackground, this);\n    } else {\n      const headerProps = {\n        position: new Animated.Value(this.props.scene.index),\n        progress: new Animated.Value(0),\n        scene: this.props.scene\n      };\n\n      appBar = this._renderHeader(headerProps);\n      background = this._renderBackground(headerProps);\n    }\n\n    const { options } = scene.descriptor;\n    const { headerStyle = {} } = options;\n    const headerStyleObj = StyleSheet.flatten(headerStyle);\n    const appBarHeight = getAppBarHeight(isLandscape);\n\n    const {\n      alignItems,\n      justifyContent,\n      flex,\n      flexDirection,\n      flexGrow,\n      flexShrink,\n      flexBasis,\n      flexWrap,\n      position,\n      padding,\n      paddingHorizontal,\n      paddingRight,\n      paddingLeft,\n      // paddingVertical,\n      // paddingTop,\n      // paddingBottom,\n      top,\n      right,\n      bottom,\n      left,\n      ...safeHeaderStyle\n    } = headerStyleObj;\n\n    if (__DEV__) {\n      warnIfHeaderStyleDefined(alignItems, 'alignItems');\n      warnIfHeaderStyleDefined(justifyContent, 'justifyContent');\n      warnIfHeaderStyleDefined(flex, 'flex');\n      warnIfHeaderStyleDefined(flexDirection, 'flexDirection');\n      warnIfHeaderStyleDefined(flexGrow, 'flexGrow');\n      warnIfHeaderStyleDefined(flexShrink, 'flexShrink');\n      warnIfHeaderStyleDefined(flexBasis, 'flexBasis');\n      warnIfHeaderStyleDefined(flexWrap, 'flexWrap');\n      warnIfHeaderStyleDefined(padding, 'padding');\n      warnIfHeaderStyleDefined(position, 'position');\n      warnIfHeaderStyleDefined(paddingHorizontal, 'paddingHorizontal');\n      warnIfHeaderStyleDefined(paddingRight, 'paddingRight');\n      warnIfHeaderStyleDefined(paddingLeft, 'paddingLeft');\n      // warnIfHeaderStyleDefined(paddingVertical, 'paddingVertical');\n      // warnIfHeaderStyleDefined(paddingTop, 'paddingTop');\n      // warnIfHeaderStyleDefined(paddingBottom, 'paddingBottom');\n      warnIfHeaderStyleDefined(top, 'top');\n      warnIfHeaderStyleDefined(right, 'right');\n      warnIfHeaderStyleDefined(bottom, 'bottom');\n      warnIfHeaderStyleDefined(left, 'left');\n    }\n\n    // TODO: warn if any unsafe styles are provided\n    const containerStyles = [options.headerTransparent ? styles.transparentContainer : styles.container, { height: appBarHeight }, safeHeaderStyle];\n\n    const { headerForceInset } = options;\n    const forceInset = headerForceInset || { top: 'always', bottom: 'never' };\n\n    return <Animated.View style={[this.props.layoutInterpolator(this.props), Platform.OS === 'ios' && !options.headerTransparent ? {\n      backgroundColor: safeHeaderStyle.backgroundColor || DEFAULT_BACKGROUND_COLOR\n    } : null]}>\n        <SafeAreaView forceInset={forceInset} style={containerStyles}>\n          {background}\n          <View style={styles.flexOne}>{appBar}</View>\n        </SafeAreaView>\n      </Animated.View>;\n  }\n}\n\nfunction warnIfHeaderStyleDefined(value, styleProp) {\n  if (styleProp === 'position' && value === 'absolute') {\n    console.warn(\"position: 'absolute' is not supported on headerStyle. If you would like to render content under the header, use the headerTransparent navigationOption.\");\n  } else if (value !== undefined) {\n    console.warn(`${styleProp} was given a value of ${value}, this has no effect on headerStyle.`);\n  }\n}\n\nlet platformContainerStyles;\nif (Platform.OS === 'ios') {\n  platformContainerStyles = {\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    borderBottomColor: '#A7A7AA'\n  };\n} else {\n  platformContainerStyles = {\n    shadowColor: 'black',\n    shadowOpacity: 0.1,\n    shadowRadius: StyleSheet.hairlineWidth,\n    shadowOffset: {\n      height: StyleSheet.hairlineWidth\n    },\n    elevation: 4\n  };\n}\n\nconst DEFAULT_BACKGROUND_COLOR = '#FFF';\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: DEFAULT_BACKGROUND_COLOR,\n    ...platformContainerStyles\n  },\n  transparentContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    ...platformContainerStyles,\n    borderBottomWidth: 0,\n    borderBottomColor: 'transparent',\n    elevation: 0\n  },\n  header: {\n    ...StyleSheet.absoluteFillObject,\n    flexDirection: 'row'\n  },\n  item: {\n    backgroundColor: 'transparent'\n  },\n  iconMaskContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  iconMaskFillerRect: {\n    flex: 1,\n    backgroundColor: '#d8d8d8',\n    marginLeft: -3\n  },\n  iconMask: {\n    // These are mostly the same as the icon in ModularHeaderBackButton\n    height: 21,\n    width: 12,\n    marginLeft: 9,\n    marginTop: -0.5, // resizes down to 20.5\n    alignSelf: 'center',\n    resizeMode: 'contain',\n    transform: [{ scaleX: I18nManager.isRTL ? -1 : 1 }]\n  },\n  // eslint-disable-next-line react-native/no-unused-styles\n  title: {\n    bottom: 0,\n    top: 0,\n    position: 'absolute',\n    alignItems: 'center',\n    flexDirection: 'row'\n  },\n  // eslint-disable-next-line react-native/no-unused-styles\n  left: {\n    left: 0,\n    bottom: 0,\n    top: 0,\n    position: 'absolute',\n    alignItems: 'center',\n    flexDirection: 'row'\n  },\n  // eslint-disable-next-line react-native/no-unused-styles\n  right: {\n    right: 0,\n    bottom: 0,\n    top: 0,\n    position: 'absolute',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  flexOne: {\n    flex: 1\n  }\n});\n\nexport default withOrientation(Header);"]},"metadata":{},"sourceType":"module"}